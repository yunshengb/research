from microsoft import MT_QUERY_FILES
import pandas as pd

def main():
	'''Parse microsoft_temp.txt generated by microsoft.py.'''
	file = open('microsoft_temp.txt')
	lines = file.readlines()
	file.close()
	split_lines = []
	for line in lines:
		# Only the first line is non-'\n'.
		line = line.replace('</string><string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">', '\n')
		line = line.replace('<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">', '')
		line = line.replace('</string>', '')
		split_lines = line.split('\n')
		break
	split_lines.remove('')
	# Go through the two lists, fetch the result from split_lines,
	# and save the it.
	query_id = 0
	for input_file, output_file in MT_QUERY_FILES:
		data = pd.read_csv(input_file)
		file = open(output_file, 'w')
		file.write('text,translation\n')
		for i, query in enumerate(data['query']):
			result = split_lines[query_id]
			file.write('"' + query + '",' + str(result) + '\n')
			query_id += 1
		file.close()
	# Should pass if microsoft_temp.txt is generated by microsoft.py
	assert(len(split_lines) == query_id)

if __name__ == '__main__':
	main()


